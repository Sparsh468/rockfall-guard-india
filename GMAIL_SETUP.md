# üìß Gmail Integration Setup Guide

This guide will help you configure SHAIL KAVACH to send emails directly to Gmail addresses for prediction alerts.

## üöÄ Quick Gmail Setup (Recommended)

### Step 1: EmailJS Setup for Gmail

1. **Create EmailJS Account:**
   - Go to [https://www.emailjs.com/](https://www.emailjs.com/)
   - Sign up for a free account (supports up to 200 emails/month)

2. **Add Gmail Service:**
   - In EmailJS dashboard, go to "Email Services"
   - Click "Add New Service"
   - Select "Gmail" as the email service
   - Connect your Gmail account (this will be the sender)
   - Note down the Service ID

3. **Create Email Template:**
   - Go to "Email Templates"
   - Create a new template with this content:

   **Template Subject:**
   ```
   {{subject}}
   ```

   **Template Content:**
   ```html
   <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
     <div style="background: linear-gradient(135deg, #1e40af, #3b82f6); color: white; padding: 30px; text-align: center;">
       <h1>SHAIL KAVACH</h1>
       <p>Mining Safety Risk Alert</p>
     </div>
     
     <div style="padding: 30px; background: white;">
       <h2>Risk Alert for {{mine_name}}</h2>
       <p><strong>Location:</strong> {{location}}</p>
       <p><strong>Risk Level:</strong> {{risk_level}}</p>
       <p><strong>Risk Percentage:</strong> {{risk_percentage}}%</p>
       <p><strong>Timestamp:</strong> {{timestamp}}</p>
       
       <div style="margin-top: 20px; padding: 15px; background: #f8fafc; border-radius: 8px;">
         <p>This alert was automatically generated by SHAIL KAVACH mining safety system.</p>
       </div>
     </div>
   </div>
   ```

   - Note down the Template ID

4. **Get Your User ID:**
   - Go to "Account" in EmailJS dashboard
   - Copy your User ID

### Step 2: Configure Environment Variables

Create a `.env` file in your project root:

```env
# Gmail Configuration via EmailJS
VITE_EMAILJS_USER_ID=your_emailjs_user_id_here
VITE_EMAILJS_SERVICE_ID=your_gmail_service_id_here
VITE_EMAILJS_TEMPLATE_ID=your_email_template_id_here

# Optional: Additional Gmail configurations
VITE_GMAIL_WEBHOOK_URL=https://your-gmail-webhook.com/endpoint
VITE_GMAIL_SMTP_URL=https://your-gmail-smtp.com/api/send
```

### Step 3: Test Gmail Integration

1. **Use the Gmail Test Component:**
   - Navigate to the Gmail Test component in the app
   - Make sure you're logged in with a Gmail address
   - Click "Send Gmail Test"
   - Check your Gmail inbox

2. **Verify Configuration:**
   - The component will show configuration status
   - Green checkmarks indicate proper setup
   - Red X marks indicate missing configuration

## üîß How Gmail Integration Works

### Automatic Gmail Delivery:
- ‚úÖ **Every Prediction**: Emails sent to user's Gmail after every prediction
- ‚úÖ **Gmail-Specific**: Optimized for Gmail delivery and formatting
- ‚úÖ **Professional Templates**: Rich HTML emails with SHAIL KAVACH branding
- ‚úÖ **Risk-Specific Content**: Detailed information based on risk level
- ‚úÖ **Multiple Fallbacks**: If EmailJS fails, tries webhook, then SMTP, then visual notification

### Gmail Email Features:
- üìß **Gmail-Optimized**: Designed specifically for Gmail's rendering
- üé® **Professional Design**: SHAIL KAVACH branding with Gmail-friendly styling
- üìä **Risk Information**: Mine details, risk level, percentage, recommendations
- ‚è∞ **Timestamp**: When the assessment was made
- üîÑ **Responsive**: Works on Gmail mobile and desktop apps

### Fallback System:
1. **EmailJS + Gmail** (Primary - most reliable)
2. **Gmail Webhook** (Secondary - custom endpoint)
3. **Gmail SMTP** (Tertiary - direct SMTP)
4. **Visual Notification** (Always works - shows on page)
5. **Console Logging** (Always works - for debugging)

## üß™ Testing Gmail Integration

### Using Gmail Test Component:
1. **Prerequisites:**
   - Must be logged in with a Gmail address (@gmail.com)
   - EmailJS configuration completed

2. **Test Process:**
   - Click "Send Gmail Test" button
   - Check your Gmail inbox (including spam folder)
   - Verify the email was received with proper formatting

3. **Expected Results:**
   - ‚úÖ Success notification in the app
   - ‚úÖ Email received in Gmail inbox
   - ‚úÖ Professional HTML formatting
   - ‚úÖ SHAIL KAVACH branding
   - ‚úÖ Test information displayed correctly

### Debugging Gmail Issues:
1. **Check Configuration Status:**
   - User ID: ‚úÖ (EmailJS account ID)
   - Service ID: ‚úÖ (Gmail service ID)
   - Template ID: ‚úÖ (Email template ID)

2. **Common Issues:**
   - **"Not a Gmail Address"**: User must be logged in with @gmail.com
   - **"EmailJS not configured"**: Environment variables missing
   - **"Gmail webhook error"**: Custom webhook not responding
   - **Email in spam**: Check Gmail spam folder

3. **Browser Console:**
   - Look for detailed Gmail service logs
   - Check for error messages
   - Verify EmailJS responses

## üìã Gmail Configuration Checklist

### Required Configuration:
- [ ] EmailJS account created
- [ ] Gmail service added to EmailJS
- [ ] Email template created with SHAIL KAVACH branding
- [ ] Environment variables set (.env file)
- [ ] User logged in with Gmail address
- [ ] Gmail test component shows green checkmarks

### Optional Enhancements:
- [ ] Custom Gmail webhook endpoint
- [ ] Gmail SMTP service configuration
- [ ] Custom email templates
- [ ] Gmail-specific styling optimizations

## üö® Troubleshooting Gmail Issues

### Gmail Not Receiving Emails:
1. **Check Spam Folder**: Gmail may filter automated emails
2. **Verify Gmail Address**: Must be a valid @gmail.com address
3. **Check EmailJS Quotas**: Free tier has limits
4. **Verify Template**: EmailJS template must be properly configured

### Configuration Issues:
1. **Environment Variables**: Ensure .env file is in project root
2. **Service ID**: Must match the Gmail service ID from EmailJS
3. **Template ID**: Must match the template ID from EmailJS
4. **User ID**: Must match your EmailJS account ID

### EmailJS Issues:
1. **Account Verification**: Verify your EmailJS account
2. **Service Status**: Check if Gmail service is active
3. **Template Syntax**: Ensure template variables are correct
4. **Quota Limits**: Check if you've exceeded free tier limits

## üéØ Production Gmail Setup

### For Production Deployment:
1. **Upgrade EmailJS Plan**: Consider paid plan for higher limits
2. **Custom Domain**: Use your own domain for professional emails
3. **Email Authentication**: Set up SPF, DKIM, DMARC records
4. **Monitoring**: Monitor email delivery rates
5. **Backup Services**: Configure multiple email providers

### Gmail Best Practices:
1. **Consistent Sending**: Avoid burst sending to prevent spam filters
2. **Professional Content**: Use clear, professional email content
3. **Unsubscribe Option**: Include unsubscribe links (if required)
4. **Testing**: Regularly test email delivery
5. **Monitoring**: Monitor bounce rates and delivery issues

## üìû Gmail Support

### If Gmail Integration Fails:
1. **Check Gmail Test Component**: Shows detailed status
2. **Browser Console**: Look for specific error messages
3. **EmailJS Dashboard**: Check service and template status
4. **Gmail Settings**: Verify Gmail account settings
5. **Spam Folder**: Check if emails are being filtered

### Alternative Solutions:
1. **Visual Notifications**: Always work as fallback
2. **Console Logging**: Always available for debugging
3. **Email Log**: Stored in browser for review
4. **Multiple Providers**: Try different email services

The Gmail integration is designed to be robust with multiple fallback options, ensuring users always receive notifications even if the primary Gmail service fails.









